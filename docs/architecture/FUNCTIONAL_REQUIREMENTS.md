# Functional Requirements (ความต้องการเชิงฟังก์ชัน)

ระบบ FallHelp มีผู้ใช้งาน 3 ประเภท (Actors)

---

## 1. ผู้สูงอายุ (Elder / Device User)

**คำอธิบาย:** ผู้สูงอายุที่สวมใส่อุปกรณ์ตรวจจับการหกล้ม

**Functional Requirements:**

|  รหัส  | ความต้องการ                                                                                       |
| :----: | ------------------------------------------------------------------------------------------------- |
| FR-E01 | ผู้สูงอายุสามารถสวมใส่อุปกรณ์เพื่อให้ระบบตรวจจับและแจ้งเตือนได้ทันที                              |
| FR-E02 | ผู้สูงอายุสามารถกดปุ่มยกเลิกการแจ้งเตือน (False Alarm Cancel Button) เพื่อยกเลิกการแจ้งเตือนที่ผิดพลาดได้ภายใน 30 วินาที |
| FR-E03 | ผู้สูงอายุได้ยินเสียงเตือน (Beep) เมื่ออุปกรณ์ตรวจพบการล้ม                                        |
| FR-E04 | ผู้สูงอายุเห็น LED แสดงสถานะอุปกรณ์ (เปิด/ปิด/ชาร์จ)                                              |

---

## 2. ญาติผู้ดูแล (Caregiver)

**คำอธิบาย:** ญาติหรือผู้ดูแลผู้สูงอายุที่ใช้แอปพลิเคชันมือถือ

### 2.1 ฟีเจอร์หลัก (Core Features)

|  รหัส  | ความต้องการ                                                                   |
| :----: | ----------------------------------------------------------------------------- |
| FR-C01 | สามารถลงทะเบียนบัญชีผู้ใช้และเข้าสู่ระบบได้                                   |
| FR-C02 | สามารถลงทะเบียนและดูแลผู้สูงอายุได้หลายคนในบัญชีเดียว                         |
| FR-C03 | สามารถเพิ่ม ดู แก้ไข ข้อมูลผู้สูงอายุ (ชื่อ, เพศ, อายุ, โรคประจำตัว, ที่อยู่) |
| FR-C04 | สามารถเพิ่มหรือยกเลิกการเชื่อมต่ออุปกรณ์ (Pair/Unpair) ผ่าน QR Code           |
| FR-C05 | สามารถอัปเดตการตั้งค่า Wi-Fi ให้กับอุปกรณ์ได้                                 |
| FR-C06 | สามารถเพิ่ม แก้ไข ลบ และจัดลำดับผู้ติดต่อฉุกเฉินได้                           |
| FR-C07 | สามารถดูสถานะการเชื่อมต่อ, การหกล้ม, และอัตราการเต้นหัวใจแบบ Real-time        |
| FR-C08 | ได้รับ Push Notification เมื่อเกิดการหกล้ม, ชีพจรผิดปกติ, หรืออุปกรณ์ Offline |

### 2.2 ฟีเจอร์เสริม (Support Features)

|  รหัส  | ความต้องการ                                                        |
| :----: | ------------------------------------------------------------------ |
| FR-C09 | สามารถจัดการข้อมูลส่วนตัว (ชื่อ, เบอร์โทร, อีเมล, รหัสผ่าน)        |
| FR-C10 | สามารถลบบัญชีผู้ใช้ (Delete Account) ได้                           |
| FR-C11 | สามารถดูประวัติการแจ้งเตือนย้อนหลัง และจัดการสถานะได้              |
| FR-C12 | สามารถเชิญสมาชิกครอบครัวเข้าร่วมดูแลและกำหนดสิทธิ์ (Editor/Viewer) |
| FR-C13 | สามารถดูรายงานสรุปสุขภาพรายเดือน (Monthly Report)                  |
| FR-C14 | สามารถดูเหตุการณ์ย้อนหลัง (Event History) พร้อมตัวกรอง             |
| FR-C15 | สามารถส่ง Feedback หรือแจ้งซ่อมพร้อมติดตามสถานะ (Ticket)           |
| FR-C16 | สามารถกดโทรฉุกเฉินได้ทันที รวมถึงปุ่มลัดโทร 1669                   |

---

## 3. ผู้ดูแลระบบ (Admin)

**คำอธิบาย:** ผู้ดูแลระบบที่ใช้ Admin Panel บนเว็บไซต์

|  รหัส  | ความต้องการ                                                      |
| :----: | ---------------------------------------------------------------- |
| FR-A01 | สามารถเข้าสู่ระบบและออกจากระบบได้ (Email & Password)             |
| FR-A02 | สามารถดู Dashboard ภาพรวมระบบ (จำนวนผู้ใช้, ผู้สูงอายุ, อุปกรณ์) |
| FR-A03 | สามารถลงทะเบียนอุปกรณ์ใหม่และสร้าง QR Code ได้                   |
| FR-A04 | สามารถดูรายการอุปกรณ์, ลบ, และยกเลิกการจับคู่ได้                 |
| FR-A05 | สามารถจัดการ Feedback และ Repair Requests พร้อมอัปเดตสถานะ       |

---

## 4. อุปกรณ์ IoT (Device)

**คำอธิบาย:** อุปกรณ์ตรวจจับการหกล้มที่ผู้สูงอายุสวมใส่

|  รหัส  | ความต้องการ                                              |
| :----: | -------------------------------------------------------- |
| FR-D01 | อุปกรณ์ตรวจจับการหกล้มโดยใช้ Accelerometer และ Gyroscope |
| FR-D02 | อุปกรณ์วัดอัตราการเต้นหัวใจ (Heart Rate)                 |
| FR-D03 | อุปกรณ์ส่งข้อมูลไปยัง Backend ผ่าน MQTT                  |
| FR-D04 | อุปกรณ์รองรับ AP Mode สำหรับตั้งค่า Wi-Fi                |
| FR-D05 | อุปกรณ์มีปุ่มกดสำหรับยกเลิก False Alarm (False Alarm Cancel Button) |
| FR-D06 | อุปกรณ์มีเสียงเตือนเมื่อตรวจพบการล้ม                     |

---

## ฟีเจอร์ระบบแยกตามส่วน

### Mobile App (แอปพลิเคชันมือถือ)

- Authentication (Login, Register, Forgot Password)
- First-time Setup (Elder Info → Device Pairing → WiFi Config)
- Dashboard แสดงสถานะ Real-time
- จัดการข้อมูลผู้สูงอายุ
- จับคู่อุปกรณ์ผ่าน QR Code
- ตั้งค่า Wi-Fi ให้อุปกรณ์
- จัดการผู้ติดต่อฉุกเฉิน
- ดูเหตุการณ์ย้อนหลัง
- Push Notifications
- เชิญสมาชิกครอบครัว
- จัดการโปรไฟล์
- ส่ง Feedback
- ประวัติการแจ้งเตือน

### Admin Panel (เว็บไซต์ผู้ดูแลระบบ)

- Authentication (Login, Register)
- Dashboard แสดงภาพรวมระบบ
- จัดการผู้ใช้และผู้สูงอายุ
- จัดการอุปกรณ์ (ลงทะเบียน, สร้าง QR, ลบ)
- จัดการ Feedback และ Repair Requests

### Backend API

- RESTful API (45+ endpoints)
- Real-time Communication (Socket.io)
- IoT Integration (MQTT)
- Push Notifications (Expo Push API)
- Time-series Database (TimescaleDB)
- Authentication & Authorization (JWT, RBAC)
- Rate Limiting & Security
- Event Summary Reports

---

## Use Cases

### UC-1: ลงทะเบียนและตั้งค่าระบบ

1. ญาติลงทะเบียนบัญชีผ่านแอป
2. ญาติเพิ่มข้อมูลผู้สูงอายุ
3. ญาติจับคู่อุปกรณ์ผ่าน QR Code
4. ญาติตั้งค่า Wi-Fi ให้อุปกรณ์
5. ระบบพร้อมใช้งาน

### UC-2: ตรวจจับการหกล้มและแจ้งเตือน

1. ผู้สูงอายุหกล้ม
2. อุปกรณ์ตรวจจับผ่าน Accelerometer
3. อุปกรณ์ส่งข้อมูลผ่าน MQTT
4. Backend ส่ง Push Notification ไปยังญาติทุกคน
5. ญาติได้รับแจ้งเตือนบนแอป
6. ผู้สูงอายุสามารถกดยกเลิก False Alarm ภายใน 30 วินาที
7. หากไม่ยกเลิก ระบบโทรหาผู้ติดต่อฉุกเฉินตามลำดับ

### UC-3: Admin ลงทะเบียนอุปกรณ์ใหม่

1. Admin เข้าสู่ระบบ Admin Panel
2. Admin ไปที่หน้าจัดการอุปกรณ์
3. Admin กด "ลงทะเบียนอุปกรณ์ใหม่"
4. ระบบสร้างรหัสอุปกรณ์และ QR Code
5. Admin พิมพ์ QR Code ติดอุปกรณ์
6. อุปกรณ์พร้อมให้ญาติจับคู่

### UC-4: เชิญสมาชิกครอบครัว

1. ญาติ (Owner) ไปที่หน้าจัดการสมาชิก
2. ญาติกรอกอีเมลสมาชิกที่ต้องการเชิญ
3. ระบบส่งคำเชิญ
4. สมาชิกลงทะเบียนและยอมรับคำเชิญ
5. สมาชิกสามารถดูข้อมูลผู้สูงอายุได้ (ตามสิทธิ์ที่กำหนด)

---

## Non-Functional Requirements

### ประสิทธิภาพ (Performance)

- Real-time updates ภายใน 100ms
- API response time < 500ms
- รองรับผู้ใช้พร้อมกัน 1000+ คน

### ความปลอดภัย (Security)

- JWT token authentication
- Password hashing (bcrypt)
- Rate limiting
- HTTPS/TLS encryption
- Role-based access control (RBAC)

### ความน่าเชื่อถือ (Reliability)

- Uptime 99.9%
- Auto-reconnect สำหรับ MQTT และ Socket.io
- Error handling ที่เหมาะสม
- สำรองข้อมูลอัตโนมัติ

### ความสามารถในการขยาย (Scalability)

- รองรับ Horizontal scaling
- Database partitioning (TimescaleDB)
- พร้อมสำหรับ Load balancing

### การใช้งาน (Usability)

- ออกแบบสำหรับมือถือเป็นหลัก
- รองรับภาษาไทย
- UI/UX เข้าใจง่าย

---

**Last Updated:** December 13, 2025
